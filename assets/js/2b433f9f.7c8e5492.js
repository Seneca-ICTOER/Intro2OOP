"use strict";(self.webpackChunkoop345=self.webpackChunkoop345||[]).push([[573],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=l(n),h=i,d=p["".concat(s,".").concat(h)]||p[h]||m[h]||a;return n?r.createElement(d,o(o({ref:t},u),{},{components:n})):r.createElement(d,o({ref:t},u))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[p]="string"==typeof e?e:i,o[1]=c;for(var l=2;l<a;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2917:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return o},default:function(){return p},frontMatter:function(){return a},metadata:function(){return c},toc:function(){return l}});var r=n(3117),i=(n(7294),n(3905));const a={id:"the-current-object",title:"The Current Object",sidebar_position:2,description:"TBD"},o="The Current Object",c={unversionedId:"C-Encapsulation/the-current-object",id:"C-Encapsulation/the-current-object",title:"The Current Object",description:"TBD",source:"@site/docs/C-Encapsulation/the-current-object.md",sourceDirName:"C-Encapsulation",slug:"/C-Encapsulation/the-current-object",permalink:"/C-Encapsulation/the-current-object",draft:!1,editUrl:"https://github.com/Seneca-ICTOER/Intro2OOP/tree/main/docs/C-Encapsulation/the-current-object.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"the-current-object",title:"The Current Object",sidebar_position:2,description:"TBD"},sidebar:"courseNotesSidebar",previous:{title:"Construction and Destruction",permalink:"/C-Encapsulation/construction-and-destruction"},next:{title:"Member Operators",permalink:"/C-Encapsulation/member-operators"}},s={},l=[{value:"Member Function Parameters",id:"member-function-parameters",level:2},{value:"<code>this</code> Keyword",id:"this-keyword",level:2},{value:"Reference to the Current Object",id:"reference-to-the-current-object",level:3},{value:"Assigning to the Current Object",id:"assigning-to-the-current-object",level:3},{value:"Example - Validated Input",id:"example---validated-input",level:3},{value:"Summary",id:"summary",level:2}],u={toc:l};function p(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"the-current-object"},"The Current Object"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Distinguish a member function's access to instance variables and client variables"),(0,i.kt)("li",{parentName:"ul"},"Access the current object from within a member function")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},'"Each member function knows what object it was invoked for and can explicitly refer to it" ',(0,i.kt)("strong",{parentName:"p"},"Stroustrup, 1997."))),(0,i.kt)("p",null,"Once client code calls a member function on an object of its class and before that function returns control to the client code, that member function may need to refer to its host object. We refer to the host object from within a member function as the current object for that function. In other words, the current object is the region of memory that contains the data on which a member function currently operates."),(0,i.kt)("p",null,"This chapter describes the mechanism by which a member function accesses its current object and shows how to refer to that current object from within the function."),(0,i.kt)("h2",{id:"member-function-parameters"},"Member Function Parameters"),(0,i.kt)("p",null,"Member functions receive information through parameters and return information through a return value and possibly some of their parameters. The parameters of any member function are of two distinct kinds:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Explicit:")," Access the client code"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Implicit:")," Access the instance variables")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Member Functions",src:n(6671).Z,width:"326",height:"226"})),(0,i.kt)("p",null,"Explicit parameters receive information from the client code and return information to the client code. We define them explicitly in the header of a member function. Their lifetime extends from entry to the function to exit from the function. They have function scope."),(0,i.kt)("p",null,"Implicit parameters tie the member function to the current object."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"implicit and explicit parameters",src:n(9233).Z,width:"612",height:"218"})),(0,i.kt)("p",null,"The syntax of a normal member function call reflects this two-part mechanism. The name of the object on which the client code invokes the function identifies the implicit parameters, while the arguments that the client code passes to the function initialize the explicit parameters."),(0,i.kt)("p",null,"Consider the constructors and calls to the ",(0,i.kt)("inlineCode",{parentName:"p"},"display()")," member function in the following code snippet:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},'// ...\n\nStudent::Student(int s, const float* g, int n)\n{\n    cout << "Entering 3-arg constructor\\n";\n    set(s, g, n);\n}\n\nvoid Student::display() const {\n    if (no > 0) {\n        cout << no << ":\\n";\n        cout.setf(ios::fixed);\n        cout.precision(2);\n        for (int i = 0; i < ng; i++) {\n            cout.width(6);\n            cout << grade[i] << endl;\n        }\n        cout.unsetf(ios::fixed);\n        cout.precision(6);\n    } else {\n        cout << "no data available" << endl;\n    }\n}\n\nint main () {\n    float gh[] = {89.4f, 67.8f, 45.5f};\n    float gj[] = {83.4f, 77.8f, 55.5f};\n    Student harry(1234, gh, 3),\n            josee(1235, gj, 3);\n    harry.display();\n    josee.display();\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"Entering 3-arg constructor\nEntering 3-arg constructor\n1234:\n 89.40\n 67.80\n 45.50\n1235:\n 83.40\n 77.80\n 55.50\nEntering destructor for 1235\nEntering destructor for 1234\n")),(0,i.kt)("p",null,"The constructor for ",(0,i.kt)("inlineCode",{parentName:"p"},"harry")," receives data in its explicit parameters and copies that data to the arguments in the call to the ",(0,i.kt)("inlineCode",{parentName:"p"},"set()")," member function on the current object, which consists of the instance variables for ",(0,i.kt)("inlineCode",{parentName:"p"},"harry"),". The constructor for ",(0,i.kt)("inlineCode",{parentName:"p"},"josee")," receives data in its explicit parameters and copies that data to the arguments in the call to the ",(0,i.kt)("inlineCode",{parentName:"p"},"set()")," member function on the current object, which consists of the instance variables for ",(0,i.kt)("inlineCode",{parentName:"p"},"josee"),"."),(0,i.kt)("p",null,"The first client call to the ",(0,i.kt)("inlineCode",{parentName:"p"},"display()")," member function accesses ",(0,i.kt)("inlineCode",{parentName:"p"},"harry")," through its implicit parameters. The second client call accesses ",(0,i.kt)("inlineCode",{parentName:"p"},"josee")," through its implicit parameters."),(0,i.kt)("h2",{id:"this-keyword"},(0,i.kt)("inlineCode",{parentName:"h2"},"this")," Keyword"),(0,i.kt)("p",null,"The keyword ",(0,i.kt)("inlineCode",{parentName:"p"},"this")," returns the address of the current object. That is, ",(0,i.kt)("inlineCode",{parentName:"p"},"this")," holds the address of the region of memory that contains all of the data stored in the instance variables of current object. ",(0,i.kt)("inlineCode",{parentName:"p"},"*this")," refers to the current object itself; that is, to the complete set of its instance variables."),(0,i.kt)("p",null,"We use the thi`s keyword within a member function to refer to the complete set of instance variables that that member function is currently accessing through its implicit parameters."),(0,i.kt)("p",null,"The figure below illustrates usage of the keyword. The top memory map shows two member function and three ",(0,i.kt)("inlineCode",{parentName:"p"},"Student")," objects. The question mark indicates that the data on which the member function logic operates is unknown. The middle memory map identifies the data when the member functions are called on object ",(0,i.kt)("inlineCode",{parentName:"p"},"b"),". The bottom memory map identifies the data when the member functions are called on object ",(0,i.kt)("inlineCode",{parentName:"p"},"a"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Implicit and Explicit Parameters",src:n(210).Z,width:"933",height:"662"})),(0,i.kt)("p",null,"For example, for the ",(0,i.kt)("inlineCode",{parentName:"p"},"display()")," member function to return a copy of its host object, we write:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"Student Student::display() const {\n\n    // ...\n\n    return *this;\n}\nint main() {\n    float gh[] = {89.4f, 67.8f, 45.5f};\n    Student harry(1234, gh, 3), backup;\n    backup = harry.display();\n    backup.display();\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"Entering 3-arg constructor\n1234:\n 89.40\n 67.80\n 45.50\nEntering destructor for 1234\nEntering destructor for 1234\nEntering destructor for 1234\nEntering destructor for 1234\n")),(0,i.kt)("p",null,"The keyword ",(0,i.kt)("inlineCode",{parentName:"p"},"this")," has no meaning outside a member function."),(0,i.kt)("h3",{id:"reference-to-the-current-object"},"Reference to the Current Object"),(0,i.kt)("p",null,"We can improve this definition of ",(0,i.kt)("inlineCode",{parentName:"p"},"display()")," by returning an unmodifiable reference to the current object rather than a copy of the object. This would improve performance if the object was large, since copying all of its instance variables would be compute intensive. Returning a reference only copies the object's address, which is typically a 4-byte operation:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"const Student& Student::display() const {\n\n    // ...\n\n    return *this;\n}\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"const")," qualifier on the return type prevents client code from placing the call to the member function on the left side of an assignment operator and thereby enabling a change to the instance variables themselves."),(0,i.kt)("h3",{id:"assigning-to-the-current-object"},"Assigning to the Current Object"),(0,i.kt)("p",null,"To copy the values of the instance variables of one object into those of the current object, we dereference the keyword and use ",(0,i.kt)("inlineCode",{parentName:"p"},"*this")," as the left operand in an assignment expression:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"*this = ...;\n")),(0,i.kt)("h3",{id:"example---validated-input"},"Example - Validated Input"),(0,i.kt)("p",null,"Let us introduce a member function to our Student class called ",(0,i.kt)("inlineCode",{parentName:"p"},"read()")," that:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Extracts data from standard input"),(0,i.kt)("li",{parentName:"ul"},"Stores that data in a temporary ",(0,i.kt)("inlineCode",{parentName:"li"},"Student")," object"),(0,i.kt)("li",{parentName:"ul"},"Copies the temporary object to the current object only if the temporary object is not empty"),(0,i.kt)("li",{parentName:"ul"},"Leaves the current object unchanged if the temporary object is empty")),(0,i.kt)("p",null,"To avoid duplicating validation logic, we:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Construct a local ",(0,i.kt)("inlineCode",{parentName:"li"},"Student")," object passing the input data to the three-argument constructor"),(0,i.kt)("li",{parentName:"ul"},"Let the internal logic determine whether to accept the data or place the object in a safe empty state"),(0,i.kt)("li",{parentName:"ul"},"Assgin the local object to the current object if the temporary object accepted the data")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},'void Student::read() {\n\n    int no;          // will hold the student number\n    int ng;          // will hold the number of grades\n    float grade[NG]; // will hold the grades\n\n    cout << "Enter student number : ";\n    cin >> no;\n    cout << "Enter number of grades : ";\n    cin >> ng;\n    if (ng > NG) ng = NG;\n    for (int i = 0; i < ng; i++) {\n        cout << "Enter student grade : ";\n        cin >> grade[i];\n    }\n\n    // construct the temporary object\n    Student temp(no, grade, ng);\n    // if data is valid, the student number is non-zero\n    if (temp.no != 0)\n        // copy the temporary object into the current object\n        *this = temp;\n}\n')),(0,i.kt)("p",null,"Since the temporary object (",(0,i.kt)("inlineCode",{parentName:"p"},"temp"),") and the current object are instances of the same class, this member function can access each object's instance variables directly."),(0,i.kt)("h2",{id:"summary"},"Summary"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The current object is the current host object for the member function\na member function's parameters consist of implicit and explicit parameters"),(0,i.kt)("li",{parentName:"ul"},"A member function's explicit parameters receive information from the client code"),(0,i.kt)("li",{parentName:"ul"},"A member function's implicit parameters bind the function to the instance variables of current object"),(0,i.kt)("li",{parentName:"ul"},"The keyword ",(0,i.kt)("inlineCode",{parentName:"li"},"this")," holds the address of the current object"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"*this")," refers to the current object itself"),(0,i.kt)("li",{parentName:"ul"},"The keyword ",(0,i.kt)("inlineCode",{parentName:"li"},"this")," is meaningless outside a member function")))}p.isMDXComponent=!0},6671:function(e,t,n){t.Z=n.p+"assets/images/current_object-dcfa9e5345aa313c4d91e55d4c688719.png"},9233:function(e,t,n){t.Z=n.p+"assets/images/implicit-f1816e1f60d971c502ef885a95cb68ed.png"},210:function(e,t,n){t.Z=n.p+"assets/images/this-e40ed0e2969e2c29ac58536721db4725.png"}}]);